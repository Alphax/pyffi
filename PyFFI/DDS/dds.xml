<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE fileformat>
<fileformat>
    <version num="DX9" />
    <version num="DX10" />

    <!--
    *******************
    *** basic types ***
    *******************
    -->

    <basic name="ubyte">
        An unsigned 8-bit integer.
    </basic>

    <basic name="byte">
        A signed 8-bit integer.
    </basic>

    <basic name="ushort">
        An unsigned 16-bit integer.
    </basic>

    <basic name="short">
        A signed 16-bit integer.
    </basic>

    <basic name="uint">
        An unsigned 32-bit integer.
    </basic>

    <basic name="int">
        A signed 32-bit integer.
    </basic>

    <basic name="char">
        An 8-bit character.
    </basic>

    <basic name="float">
        A standard 32-bit floating point number.
    </basic>

    <basic name="HeaderString">
        The string "DDS ".
    </basic>

    <!--
    *******************
    *** alias types ***
    *******************
    -->

    <alias name="bool" type="ubyte" />
    
    <!--
    ******************
    *** enum types ***
    ******************
    -->

    <enum name="FourCC" type="uint" default="0x31545844">
        An unsigned 32-bit integer, describing the compression type.
        <option value="0x31545844" name="DXT1" />
        <option value="0x32545844" name="DXT2" />
        <option value="0x33545844" name="DXT3" />
        <option value="0x34545844" name="DXT4" />
        <option value="0x35545844" name="DXT5" />
        <option value="0x42475852" name="RXGB" />
        <option value="0x31495441" name="ATI1" />
        <option value="0x32495441" name="ATI2" />
    </enum>
    
    <!--
    ******************
    *** bitstructs ***
    ******************
    -->

    <bitstruct name="HeaderFlags" numbytes="4">
        <bits name="Caps" numbits="1" default="1" />
        <bits name="Height" numbits="1" />
        <bits name="Width" numbits="1" />
        <bits name="Pitch" numbits="1" />
        <bits name="Reserved 1" numbits="8" />
        <bits name="Pixel Format" numbits="1" default="1" />
        <bits name="Reserved 2" numbits="4" />
        <bits name="Mipmap Count" numbits="1" />
        <bits name="Reserved 3" numbits="1" />
        <bits name="Linear Size" numbits="1" />
        <bits name="Reserved 4" numbits="3" />
        <bits name="Depth" numbits="1" />
    </bitstruct>

    <bitstruct name="PixelFormatFlags" numbytes="4">
        <bits name="Alpha Pixels" numbits="1" />
        <bits name="Alpha" numbits="1" />
        <bits name="FourCC" numbits="1" />
        <bits name="Palette Indexed 4" numbits="1" />
        <bits name="Reserved 1" numbits="1" />
        <bits name="Palette Indexed 8" numbits="1" />
        <bits name="RGB" numbits="1" default="1" />
        <bits name="Reserved 2" numbits="4" />
        <bits name="Palette Indexed 1" numbits="1" />
        <bits name="Palette Indexed 2" numbits="1" />
        <bits name="Reserved 3" numbits="2" />
        <bits name="Alpha Premult" numbits="1" />
        <bits name="Reserved 4" numbits="15" />
        <bits name="Normal" numbits="1" />
    </bitstruct>

    <bitstruct name="Caps1" numbytes="4">
        <bits name="Reserved 1" numbits="3" />
        <bits name="Complex" numbits="1" />
        <bits name="Reserved 2" numbits="8" />
        <bits name="Texture" numbits="1" default="1" />
        <bits name="Reserved 3" numbits="9" />
        <bits name="Mipmap" numbits="1" />
    </bitstruct>

    <bitstruct name="Caps2" numbytes="4" >
        <bits name="Reserved 1" numbits="9" />
        <bits name="Cubemap" numbits="1" />
        <bits name="Cubemap Pos X" numbits="1" />
        <bits name="Cubemap Neg X" numbits="1" />
        <bits name="Cubemap Pos Y" numbits="1" />
        <bits name="Cubemap Neg Y" numbits="1" />
        <bits name="Cubemap Pos Z" numbits="1" />
        <bits name="Cubemap Neg Z" numbits="1" />
        <bits name="Reserved 2" numbits="5" />
        <bits name="Volume" numbits="1" />
    </bitstruct>

    <!--
    ***************
    *** structs ***
    ***************
    -->

    <struct name="PixelFormat">
        <add name="Size" type="uint" default="32" />
        <add name="Flags" type="PixelFormatFlags">Non-zero for DX9, zero for DX10.</add>
        <add name="FourCC" type="FourCC" />
        <add name="Bit Count" type="uint" default="24" />
        <add name="R Mask" type="uint" default="0x00FF0000" />
        <add name="G Mask" type="uint" default="0x0000FF00" />
        <add name="B Mask" type="uint" default="0x000000FF" />
        <add name="A Mask" type="uint" default="0x00000000" />
    </struct>

    <struct name="Header">
        <add name="Header String" type="HeaderString">DDS</add>
        <add name="Size" type="uint" default="124" />
        <add name="Flags" type="HeaderFlags" />
        <add name="Height" type="uint" />
        <add name="Width" type="uint" />
        <add name="Pitch" type="uint" />
        <add name="Depth" type="uint" />
        <add name="Mipmap Count" type="uint" />
        <add name="Reserved 1" type="uint" arr1="11" />
        <add name="Pixel Format" type="PixelFormat" />
        <add name="Caps 1" type="Caps1" />
        <add name="Caps 2" type="Caps2" />
        <add name="Caps 3" type="uint" />
        <add name="Caps 4" type="uint" />
        <add name="Unused" type="uint" />
        <!-- DX10 extensions -->
        <add name="DXGI Format" type="uint" ver1="DX10" />
        <add name="Resource Dimension" type="uint" ver1="DX10" />
        <add name="Misc Flags" type="uint" ver1="DX10" />
        <add name="Array Size" type="uint" ver1="DX10" />
        <add name="Reserved 2" type="uint" ver1="DX10" />
    </struct>

</fileformat>

