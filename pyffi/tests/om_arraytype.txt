Regression tests for PyFFI.ObjectModels.ArrayType
=================================================

Array elements must be AnyType
------------------------------

>>> from PyFFI.ObjectModels.ArrayType import ArrayAnyType
>>> class ListOfInts(ArrayAnyType):
...     _ElementType = int # doctest: +ELLIPSIS
Traceback (most recent call last):
    ...
TypeError: ...

The append method
-----------------

>>> from PyFFI.ObjectModels.SimpleType import SimpleType
>>> class MyInt(SimpleType):
...     _ValueType = int
>>> class ListOfInts(ArrayAnyType):
...     _ElementType = MyInt
>>> testlist = ListOfInts()
>>> # append an item
>>> #   item must be type testlist._ElementType, try with invalid type
>>> testlist.append(0) # doctest: +ELLIPSIS
Traceback (most recent call last):
    ...
TypeError: ...
>>> #   now with valid type
>>> x = MyInt(value=123)
>>> testlist.append(x)
>>> print(testlist)
MyInt array:
  [00] 123
<BLANKLINE>
>>> # item we append should not have anothor parent
>>> # try adding x again...
>>> ListOfInts().append(x) # doctest: +ELLIPSIS
Traceback (most recent call last):
    ...
ValueError: ...

The extend method
-----------------

>>> from PyFFI.ObjectModels.SimpleType import SimpleType
>>> class MyInt(SimpleType):
...     _ValueType = int
>>> class ListOfInts(ArrayAnyType):
...     _ElementType = MyInt
>>> testlist = ListOfInts()
>>> testlist.extend([MyInt(value=val) for val in xrange(2, 10, 2)])
>>> print(testlist)
MyInt array:
  [00] 2
  [01] 4
  [02] 6
  [03] 8
<BLANKLINE>


